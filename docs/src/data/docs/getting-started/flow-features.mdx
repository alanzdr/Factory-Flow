---
title: "Flow Features"
---
You can add extra functions to the flow, such as conditions and loops.

<b>Notice:</b>

- You need to be in the standard layer of the flow to be able to call `execute`, so every extra function that starts needs to be ended with `endif`, `while` or `catch` to return to the standard layer.
- You can add as many extra functions as you want, with several extra layers.
- You can add extra functions in any position in the flow, and you can always remove or add a new `Robot` in any position.

## Conditional Flow

- You can create conditional flows, to do this, just use the `if` method, passing boolean or a function that returns a boolean, then all robots that were added below will only be executed if the condition is true.
- You can add an `else`, to then execute if the condition is false, and to return to the normal flow, just use `endif`.

```ts
Factory
  .createFlow(state)
    .if((factory) => factory.state.get("images").length > 0)
      .pipe(DownloadImagesRobot)
    .else()
      .pipe(FetchImagesRobot)
      .pipe(DownloadImagesRobot)
    .endif()
  .execute()

```

## Do-while Loop Flow

- You can create a loop flow, to do this, just use the `do` method, then all robots that were added below.
- To return to the normal flow, just use `while`, passing boolean or a function that returns a boolean.
- The loop it will only be executed as long as the condition remains `true`.

```ts

Factory
  .createFlow(state)
    .do()
      .pipe(FetchSingleImageRobot)
      .pipe(DownloadSingleImageRobot)
    .while((factory) => factory.state.get("remainingImages").length > 0)
  .execute()

```

## Try-Catch Flow

- You can create a try-catch flow, to catch any errors that happen during the flow, to do this, just use the `try` method, then all robots that were added below.
- To return to the normal flow, just use `catch`, passing a function that will be executed if an error occurs.

```ts

Factory
  .createFlow(state)
    .try()
      .pipe(FetchImagesRobot)
      .pipe(DownloadImagesRobot)
    .catch(async (error) => {
      console.error("Error fetching images", error);
      // You can also stop the flow calling throw again here
      // throw error;
    })
  .execute()

```

## Stop the Flow

You can stop the flow at any time, to do this, just call the `stop` method, the flow will be stopped.

```ts

Factory
  .createFlow(state)
    .if((factory) => factory.state.get("images").length > 0)
      .pipe(DownloadImagesRobot)
    .else()
      .pipe(FetchImagesRobot)
      // Stop the flow here
      .stop()
    .endif()
    // This robot will not be executed in the else condition 
    .pipe(ARemainingRobot)
  .execute()

```